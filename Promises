let promise = new Promise(function(resolve, reject){
    //resolve
    //reject
})

// This function is called as Executor function
function(resolve, reject){
    //resolve
    //reject
}

//States
1. Pending- When the executor function has started the execution
2. Resolve - When the promise is resolved
3. Reject - When the promise id reject

Result: 
 1. Undefined : Initially when the state is pending
 2. Value : When the promise is resolved
 3. Error : WHen the promise is rejected

Let promise2 = new Promise(function(resolve, reject)=>{
    resolve("The promise has been resolved")
    reject("The promise has been rejected") // ignored

    resolve("The promise has been reolved again") // ignored
})
Output: The promise has been rejected . (The promsise executes once ange ignores others)

// promise handler
const pr = new Promise(function(resolve, reject) {
    // resolve("I am resolved")
    reject("I am reject")
})

// then
pr.then((result)=>{console.log(result)},
(err)=> {console.log(err)}
)

//catch
pr.catch(err=> console.log(err))

//When you have to close timers, change states, or sideEffect type of things\

pr.finally(()=>{
    clearInterval(timerId)
})


//Promise Chain

There are three rules of promise:
1. Every promise gives a .then() handler method. Every rejected promise gives a .catch() method, If a promise is fullfilled it wont give .catch().
2. You can mainly do three things form .then() method. Either return another promise, return a variable for synchoronous operation, You can throw an error. 
3. You can rethrow the error from the catch handler to handle the error later. In this case the control will go to the next closest catch handler.

const newPromise = new Promise((resolve, reject)=> {
      const obj = {
            name:"Amandeep",
            email:"amandeep.p.2015@gmail.com"
        }
        resolve(obj);
})

// funciton returning a function
newPromise
.then((res)=>{
 return new Promise((resolve, reject)=>{
     setTimeout(()=>{
         resolve("Tiger gone");
     }, 2000)
 })
})
.then(res=>{
    console.log(res)
})

// function returning a value

newPromise
.then((res)=>{
 return `name is ${res.name}`
})
.then(res=>{
    console.log(res)
})

// throw the error
newPromise
.then((res)=>{
    if(!res.permissions.includes('hr')){
        throw new Error("You are not authorized for using it")
    }
 return `name is ${res.name}`
})
.then(res=>{
    console.log(res)
})
.catch((err)=>{
    console.log(err)
})



